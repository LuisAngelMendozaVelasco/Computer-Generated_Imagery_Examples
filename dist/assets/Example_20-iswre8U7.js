import{j as h,b as c,B as d,M as p,V as f,P as u,W as m,S as w,R as M,c as y}from"./three.module-CnqCzuzg.js";class g extends w{constructor(){super()}sense(){for(var t=0;t<this.children.length;t++)this.children[t].sense!==void 0&&this.children[t].sense(this)}plan(){for(var t=0;t<this.children.length;t++)this.children[t].plan!==void 0&&this.children[t].plan(this)}act(){for(var t=0;t<this.children.length;t++)this.children[t].act!==void 0&&this.children[t].act(this)}setMap(t){const x=Math.floor(t.length/2);for(var e=0;e<t.length;e++)for(var o=0;o<t.length;o++)t[e][o]==="x"?this.add(new C(1,o-x,-(e-x))):t[e][o]==="r"&&this.add(new i(.5,o-x,-(e-x)))}}class v extends M{constructor(t,x){super(),this.position=t,this.direction=x,this.collision=!1}}class i extends h{constructor(t,x,e){super(),this.position.x=x,this.position.y=e,this.sensor=new v,this.actuator=new c(new d(t,t,t),new p({color:"#aa0000"})),this.actuator.commands=[],this.add(this.actuator)}sense(t){this.sensor.set(this.position,new f(Math.cos(this.rotation.z),Math.sin(this.rotation.z),0));const x=this.sensor.intersectObjects(t.children,!0);x.length>0&&x[0].distance<=.5?this.sensor.collision=!0:this.sensor.collision=!1}plan(){this.actuator.commands=[],this.sensor.collision==!0?this.actuator.commands.push("rotateCCW"):this.actuator.commands.push("goStraight")}act(){const t=this.actuator.commands.pop();t===void 0?console.log("Undefined command"):t in this.operations?this.operations[t](this):console.log("Unknow Command")}}i.prototype.operations={};i.prototype.operations.goStraight=function(s,t){t===void 0&&(t=.05,s.position.x+=t*Math.cos(s.rotation.z),s.position.y+=t*Math.sin(s.rotation.z))};i.prototype.operations.rotateCW=function(s,t){t===void 0&&(t=-Math.PI/2,s.rotation.z+=t)};i.prototype.operations.rotateCCW=function(s,t){t===void 0&&(t=Math.PI/2,s.rotation.z+=t)};class C extends h{constructor(t,x,e){super(),this.add(new c(new d(t,t,t),new y)),this.size=t,this.position.x=x,this.position.y=e}}function W(){const s=new Array;s[0]="xxxxxxxxxxxxxxxxxxxxxxxxx",s[1]="xr               r      x",s[2]="x                       x",s[3]="x                       x",s[4]="x                       x",s[5]="x                       x",s[6]="x                       x",s[7]="x                       x",s[8]="xxxx   xxxxxxxxxxxxxxxxxx",s[9]="x         r             x",s[10]="x                       x",s[11]="x                       x",s[12]="x      r                x",s[13]="x                       x",s[14]="xxxxxxxxxxxxxxxxx    xxxx",s[15]="x                       x",s[16]="x     r                 x",s[17]="x                       x",s[18]="x                       x",s[19]="x                       x",s[20]="x xxxx                  x",s[21]="x    r                  x",s[22]="x                       x",s[23]="x     r                 x",s[24]="xxxxxxxxxxxxxxxxxxxxxxxxx",n=new g,n.setMap(s),r=new u,r.position.z=30,a=new m,a.setSize(window.innerWidth*.5,window.innerHeight),document.body.appendChild(a.domElement),n.add(r)}function l(){requestAnimationFrame(l),n.sense(),n.plan(),n.act(),a.render(n,r)}var n,r,a;W();l();
